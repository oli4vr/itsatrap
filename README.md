# itsatrap
Script based monitoring agent with a rest api interface and which is able to sent snmp traps.
# Description
You need libsnmp-dev as prerequisite.
The file main.csv contains the main manifesto. 1 sensor per line.
Referenced script files will be processed by the build process.

<pre>CSV Syntax :
Category;Type;SNMP_community;schedule_frequency_seconds;script_file;snmp_OID;
</pre>
<br />
-> Use "-" as snmp_OID to disable scheduled snmp traps for a specific sensor.
<br />

# How to build your own sensor package
Create your scripts. Script can be max 7900bytes long. Script must always output "VALUE STRING" per line. Each line is (sub)sensor.

# Build the application and create the package bundle
<pre>make
make install
make bundle</pre>

# Cleanup
<pre>make uninstall
make clean</pre>

# Install the package on other linux hosts
The package file will look like itsatrap.Distro.CPUarch.timestamp.sh
At this time install it as root if you want to autocreate a systemd service.
<pre>Install example :
./itsatrap.SLES.x86_64.20230908.sh
Uninstall :
./itsatrap.SLES.x86_64.20230908.sh -u
</pre>

# Bundle explained
The bundle file is a deployment script intended for easy deployment on linux hosts.
It is generated by the "make bundle" statement. The package is collected in a tar.gz and is then uuencoded plus embedded in the script.
Only use the script on systems with the same linux distribution and release version. The idea is that you can build your install bundle for each type of system to make automating your deployments easier.

# REST API listener
By default the rest api will be listening on port 40480, but this can be adapted in the config file.
You can connect to it using the http protocol.

<br />curl http://127.0.0.1:40480

